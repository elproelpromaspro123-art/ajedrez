<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="Webapp personal para jugar, analizar y estudiar ajedrez sin login." />
    <meta name="theme-color" content="#0c111b" />
    <title>Ajedrez Lab</title>

    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Instrument+Sans:wght@400;500;600;700&family=Space+Grotesk:wght@500;600;700&display=swap" rel="stylesheet" />
    <link rel="stylesheet" href="/static/pages/report/styles/app.css?v=20260223" />
    <link rel="shortcut icon" href="/static/media/favicon-freechess.ico" type="image/x-icon" />
</head>
<body>
    <div class="app-bg" aria-hidden="true">
        <div class="orb orb-a"></div>
        <div class="orb orb-b"></div>
        <div class="orb orb-c"></div>
    </div>

    <header class="topbar">
        <div class="brand">
            <p class="kicker">Uso personal</p>
            <h1>Ajedrez Lab</h1>
            <p class="subtitle">Juega contra bots, analiza partidas y estudia patrones de forma directa.</p>
        </div>
        <div class="topbar-meta">
            <p id="last-update-label">Actualizado: 22 de febrero de 2026</p>
            <a href="https://www.fide.com/FIDE/handbook/LawsOfChess.pdf" target="_blank" rel="noopener noreferrer">Reglas FIDE</a>
        </div>
    </header>

    <nav class="tabs" aria-label="Secciones">
        <button class="tab-btn is-active" data-tab-target="play-section">Jugar</button>
        <button class="tab-btn" data-tab-target="analysis-section">Analizar</button>
        <button class="tab-btn" data-tab-target="study-section">Estudio</button>
    </nav>

    <main class="content">
        <section id="play-section" class="panel is-active">
            <div class="panel-grid">
                <article class="card board-card">
                    <div class="card-header">
                        <h2>Tablero de entrenamiento</h2>
                        <div class="inline-actions">
                            <button id="play-flip-btn" class="ghost-btn" type="button">Girar</button>
                            <button id="play-new-game-btn" class="ghost-btn" type="button">Nueva partida</button>
                        </div>
                    </div>
                    <div class="board-wrap">
                        <div id="play-board" class="chessboard" aria-label="Tablero para jugar contra bot"></div>
                    </div>
                    <p id="play-status" class="status-line">Configura el bot y pulsa iniciar.</p>
                    <ol id="play-move-list" class="move-list" aria-label="Historial de jugadas"></ol>
                </article>

                <aside class="card control-card">
                    <h3>Bot y ayudas</h3>
                    <label for="bot-preset">Nivel bot (ELO)</label>
                    <select id="bot-preset">
                        <option value="600">Principiante 600</option>
                        <option value="900">Basico 900</option>
                        <option value="1200" selected>Intermedio 1200</option>
                        <option value="1500">Club 1500</option>
                        <option value="1800">Avanzado 1800</option>
                        <option value="2100">Experto 2100</option>
                    </select>

                    <label for="bot-custom-elo">ELO personalizado (400-2800)</label>
                    <input id="bot-custom-elo" type="number" min="400" max="2800" step="50" placeholder="Opcional" />

                    <label for="player-color">Color de juego</label>
                    <select id="player-color">
                        <option value="white" selected>Blancas</option>
                        <option value="black">Negras</option>
                        <option value="random">Aleatorio</option>
                    </select>

                    <label for="coach-depth">Profundidad del entrenador</label>
                    <input id="coach-depth" type="range" min="8" max="18" value="12" />
                    <p id="coach-depth-value" class="muted">12</p>

                    <div class="toggle-grid">
                        <label><input id="assist-legal" type="checkbox" checked /> Mostrar jugadas legales</label>
                        <label><input id="assist-lastmove" type="checkbox" checked /> Resaltar ultima jugada</label>
                        <label><input id="assist-coach-auto" type="checkbox" checked /> Entrenador automatico</label>
                        <label><input id="assist-coordinates" type="checkbox" checked /> Mostrar coordenadas</label>
                        <label><input id="assist-sound" type="checkbox" checked /> Sonidos</label>
                        <label><input id="assist-autopromo" type="checkbox" checked /> Auto promocion a dama</label>
                    </div>

                    <div class="stack-buttons">
                        <button id="play-start-btn" class="primary-btn" type="button">Iniciar partida</button>
                        <button id="play-hint-btn" class="secondary-btn" type="button">Pedir pista</button>
                        <button id="play-undo-btn" class="secondary-btn" type="button">Deshacer jugada</button>
                    </div>

                    <div class="coach-box">
                        <h4>Entrenador</h4>
                        <p id="coach-message">Las sugerencias apareceran aqui cuando sea tu turno.</p>
                    </div>
                </aside>
            </div>
        </section>

        <section id="analysis-section" class="panel">
            <div class="panel-grid analysis-grid">
                <article class="card control-card">
                    <h3>Analisis de partida</h3>
                    <label for="analysis-pgn">PGN</label>
                    <textarea id="analysis-pgn" rows="10" spellcheck="false" placeholder="Pega aqui tu PGN..."></textarea>

                    <label for="analysis-depth">Profundidad de analisis</label>
                    <input id="analysis-depth" type="range" min="8" max="18" value="12" />
                    <p id="analysis-depth-value" class="muted">12</p>

                    <button id="analysis-run-btn" class="primary-btn" type="button">Analizar partida</button>
                    <progress id="analysis-progress" value="0" max="100"></progress>
                    <p id="analysis-status" class="status-line">Esperando PGN.</p>

                    <div class="summary-grid">
                        <div class="summary-card">
                            <span>Precision blancas</span>
                            <strong id="analysis-white-accuracy">--</strong>
                        </div>
                        <div class="summary-card">
                            <span>Precision negras</span>
                            <strong id="analysis-black-accuracy">--</strong>
                        </div>
                        <div class="summary-card">
                            <span>Apertura</span>
                            <strong id="analysis-opening">--</strong>
                        </div>
                    </div>

                    <h4>Clasificaciones</h4>
                    <table class="classification-table">
                        <thead>
                            <tr>
                                <th>Tipo</th>
                                <th>Blancas</th>
                                <th>Negras</th>
                            </tr>
                        </thead>
                        <tbody id="classification-table-body"></tbody>
                    </table>
                </article>

                <article class="card board-card">
                    <div class="card-header">
                        <h2>Revision jugada a jugada</h2>
                        <div class="inline-actions">
                            <button id="analysis-start-btn" class="ghost-btn" type="button">|&lt;</button>
                            <button id="analysis-prev-btn" class="ghost-btn" type="button">&lt;</button>
                            <button id="analysis-next-btn" class="ghost-btn" type="button">&gt;</button>
                            <button id="analysis-end-btn" class="ghost-btn" type="button">&gt;|</button>
                        </div>
                    </div>
                    <div class="board-wrap">
                        <div id="analysis-board" class="chessboard" aria-label="Tablero de analisis"></div>
                    </div>
                    <p id="analysis-move-meta" class="status-line">No hay analisis cargado.</p>
                    <ol id="analysis-move-list" class="move-list" aria-label="Lista de jugadas analizadas"></ol>
                    <div class="coach-box">
                        <h4>Mejores lineas del motor</h4>
                        <ul id="analysis-top-lines" class="line-list"></ul>
                    </div>
                </article>
            </div>
        </section>

        <section id="study-section" class="panel">
            <header class="study-header">
                <h2>Estudio rapido</h2>
                <p>Bloques cortos con ideas practicas y posiciones de referencia.</p>
            </header>

            <div class="study-grid">
                <article class="card study-card">
                    <h3>Apertura: principios esenciales</h3>
                    <p>Controla el centro, desarrolla piezas menores rapido y enroca antes de buscar tacticas forzadas.</p>
                    <div class="study-diagram" data-fen="r1bqkbnr/pppp1ppp/2n5/4p3/2B1P3/5N2/PPPP1PPP/RNBQK2R w KQkq - 2 4"></div>
                    <ul class="compact-list">
                        <li>No muevas la misma pieza muchas veces sin necesidad.</li>
                        <li>No saques la dama temprano si no hay motivo tactico.</li>
                        <li>Conecta torres antes del medio juego.</li>
                    </ul>
                </article>

                <article class="card study-card">
                    <h3>Tactica de referencia: Partida Opera (Morphy, 1858)</h3>
                    <p>Ejemplo clasico de desarrollo, iniciativa y mate con torres coordinadas.</p>
                    <div class="study-diagram" data-fen="1n1Rkb1r/p4ppp/4q3/4p1B1/4P3/8/PPP2PPP/2K5 b k - 1 17"></div>
                    <ul class="compact-list">
                        <li>El rival queda sin coordinacion defensiva.</li>
                        <li>La actividad vale mas que el material en posiciones abiertas.</li>
                        <li>Busca jugadas forzantes: jaques, capturas y amenazas directas.</li>
                    </ul>
                </article>

                <article class="card study-card">
                    <h3>Tactica de referencia: Mate de Legal</h3>
                    <p>Un patron de sacrificio en apertura para explotar rey en el centro y piezas clavadas.</p>
                    <div class="study-diagram" data-fen="r2q1bnr/ppp1kBpp/2np4/3NN3/4P3/7P/PPPP1PP1/R1BbK2R b KQ - 2 8"></div>
                    <ul class="compact-list">
                        <li>Confirma que la dama rival esta sobrecargada o clavada.</li>
                        <li>Calcula hasta el mate antes de sacrificar.</li>
                        <li>Entrena este patron para blitz y rapidas.</li>
                    </ul>
                </article>

                <article class="card study-card">
                    <h3>Finales: plan universal</h3>
                    <p>Activa el rey, crea peon pasado y coloca torres detras del peon pasado.</p>
                    <div class="study-diagram" data-fen="8/6kp/5pp1/8/3K4/5P2/5P1P/6R1 w - - 0 1"></div>
                    <ul class="compact-list">
                        <li>El rey activo gana finales igualados.</li>
                        <li>Evita cambios que mejoren la actividad rival.</li>
                        <li>Prioriza simplificar cuando tengas ventaja tecnica.</li>
                    </ul>
                </article>
            </div>

            <div class="resource-links">
                <a href="https://www.fide.com/FIDE/handbook/LawsOfChess.pdf" target="_blank" rel="noopener noreferrer">Leyes oficiales FIDE</a>
                <a href="https://lichess.org/study" target="_blank" rel="noopener noreferrer">Estudios interactivos (Lichess)</a>
                <a href="https://www.chessprogramming.org/Main_Page" target="_blank" rel="noopener noreferrer">Referencia tecnica de motores</a>
            </div>
            <p class="study-note">Referencia actual: Stockfish 18 (31 enero 2026) y Leyes FIDE vigentes desde 2023.</p>
        </section>
    </main>

    <audio id="fx-move" src="/static/media/move.mp3"></audio>
    <audio id="fx-capture" src="/static/media/capture.mp3"></audio>
    <audio id="fx-check" src="/static/media/check.mp3"></audio>
    <audio id="fx-castle" src="/static/media/castle.mp3"></audio>
    <audio id="fx-promote" src="/static/media/promote.mp3"></audio>
    <audio id="fx-end" src="/static/media/game_end.mp3"></audio>

    <script type="module" src="/static/pages/report/scripts/main.js?v=20260223"></script>
</body>
</html>

<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="Webapp personal para jugar, analizar y estudiar ajedrez sin login." />
    <meta name="theme-color" content="#141418" />
    <title>Ajedrez Lab</title>

    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Instrument+Sans:wght@400;500;600;700&family=Space+Grotesk:wght@500;600;700&display=swap" rel="stylesheet" />
    <link rel="stylesheet" href="/static/pages/report/styles/app.css?v=20260223" />
    <link rel="shortcut icon" href="/static/media/favicon-freechess.ico" type="image/x-icon" />
</head>
<body>
    <header class="topbar">
        <div class="brand">
            <p class="kicker">Uso personal</p>
            <h1>Ajedrez Lab</h1>
            <p class="subtitle">Juega contra bots, analiza partidas y estudia patrones de forma directa.</p>
        </div>
        <div class="topbar-meta">
            <p id="last-update-label">Actualizado: 22 de febrero de 2026</p>
            <a href="https://www.fide.com/FIDE/handbook/LawsOfChess.pdf" target="_blank" rel="noopener noreferrer">Reglas FIDE</a>
        </div>
    </header>

    <nav class="tabs" aria-label="Secciones">
        <button class="tab-btn is-active" data-tab-target="play-section">Jugar</button>
        <button class="tab-btn" data-tab-target="analysis-section">Analizar</button>
        <button class="tab-btn" data-tab-target="study-section">Estudio</button>
    </nav>

    <main class="content">
        <section id="play-section" class="panel is-active">
            <div class="panel-grid">
                <article class="card board-card">
                    <div class="card-header">
                        <h2>Tablero</h2>
                        <div class="inline-actions">
                            <button id="play-flip-btn" class="ghost-btn" type="button">Girar</button>
                            <button id="play-new-game-btn" class="ghost-btn" type="button">Nueva partida</button>
                        </div>
                    </div>
                    <div class="board-wrap">
                        <div id="play-board" class="chessboard" aria-label="Tablero para jugar contra bot"></div>
                    </div>
                    <p id="play-status" class="status-line">Configura el bot y pulsa iniciar.</p>
                    <ol id="play-move-list" class="move-list" aria-label="Historial de jugadas"></ol>
                </article>

                <aside class="card control-card">
                    <h3>Bot y ayudas</h3>
                    <label for="bot-preset">Nivel bot (ELO)</label>
                    <select id="bot-preset">
                        <option value="600">Principiante 600</option>
                        <option value="900">Basico 900</option>
                        <option value="1200" selected>Intermedio 1200</option>
                        <option value="1500">Club 1500</option>
                        <option value="1800">Avanzado 1800</option>
                        <option value="2100">Experto 2100</option>
                    </select>

                    <label for="bot-custom-elo">ELO personalizado (400-2800)</label>
                    <input id="bot-custom-elo" type="number" min="400" max="2800" step="50" placeholder="Opcional" />

                    <label for="player-color">Color de juego</label>
                    <select id="player-color">
                        <option value="white" selected>Blancas</option>
                        <option value="black">Negras</option>
                        <option value="random">Aleatorio</option>
                    </select>

                    <label for="coach-depth">Profundidad del entrenador</label>
                    <input id="coach-depth" type="range" min="8" max="18" value="12" />
                    <p id="coach-depth-value" class="muted">12</p>

                    <div class="toggle-grid">
                        <label><input id="assist-legal" type="checkbox" checked /> Mostrar jugadas legales</label>
                        <label><input id="assist-lastmove" type="checkbox" checked /> Resaltar ultima jugada</label>
                        <label><input id="assist-coach-auto" type="checkbox" checked /> Entrenador automatico</label>
                        <label><input id="assist-coordinates" type="checkbox" checked /> Mostrar coordenadas</label>
                        <label><input id="assist-sound" type="checkbox" checked /> Sonidos</label>
                        <label><input id="assist-autopromo" type="checkbox" checked /> Auto promocion a dama</label>
                    </div>

                    <div class="stack-buttons">
                        <button id="play-start-btn" class="primary-btn" type="button">Iniciar partida</button>
                        <button id="play-hint-btn" class="secondary-btn" type="button">Pedir pista</button>
                        <button id="play-undo-btn" class="secondary-btn" type="button">Deshacer jugada</button>
                    </div>

                    <div class="coach-box">
                        <h4>Entrenador</h4>
                        <p id="coach-message">Las sugerencias apareceran aqui cuando sea tu turno.</p>
                    </div>
                </aside>
            </div>
        </section>

        <section id="analysis-section" class="panel">
            <div class="panel-grid analysis-grid">
                <article class="card control-card">
                    <h3>Analisis de partida</h3>
                    <label for="analysis-pgn">PGN</label>
                    <textarea id="analysis-pgn" rows="10" spellcheck="false" placeholder="Pega aqui tu PGN..."></textarea>

                    <label for="analysis-depth">Profundidad de analisis</label>
                    <input id="analysis-depth" type="range" min="8" max="18" value="12" />
                    <p id="analysis-depth-value" class="muted">12</p>

                    <button id="analysis-run-btn" class="primary-btn" type="button">Analizar partida</button>
                    <progress id="analysis-progress" value="0" max="100"></progress>
                    <p id="analysis-status" class="status-line">Esperando PGN.</p>

                    <div class="summary-grid">
                        <div class="summary-card">
                            <span>Precision blancas</span>
                            <strong id="analysis-white-accuracy">--</strong>
                        </div>
                        <div class="summary-card">
                            <span>Precision negras</span>
                            <strong id="analysis-black-accuracy">--</strong>
                        </div>
                        <div class="summary-card">
                            <span>Apertura</span>
                            <strong id="analysis-opening">--</strong>
                        </div>
                    </div>

                    <h4>Clasificaciones</h4>
                    <table class="classification-table">
                        <thead>
                            <tr>
                                <th>Tipo</th>
                                <th>Blancas</th>
                                <th>Negras</th>
                            </tr>
                        </thead>
                        <tbody id="classification-table-body"></tbody>
                    </table>
                </article>

                <article class="card board-card">
                    <div class="card-header">
                        <h2>Revision jugada a jugada</h2>
                        <div class="inline-actions">
                            <button id="analysis-start-btn" class="ghost-btn" type="button">|&lt;</button>
                            <button id="analysis-prev-btn" class="ghost-btn" type="button">&lt;</button>
                            <button id="analysis-next-btn" class="ghost-btn" type="button">&gt;</button>
                            <button id="analysis-end-btn" class="ghost-btn" type="button">&gt;|</button>
                        </div>
                    </div>
                    <div class="analysis-board-wrap">
                        <div id="eval-bar" class="eval-bar-wrap">
                            <div id="eval-fill" class="eval-fill"></div>
                            <span id="eval-label-white" class="eval-label white-label"></span>
                            <span id="eval-label-black" class="eval-label black-label"></span>
                        </div>
                        <div class="board-wrap">
                            <div id="analysis-board" class="chessboard" aria-label="Tablero de analisis"></div>
                        </div>
                    </div>
                    <p id="analysis-move-meta" class="status-line">No hay analisis cargado.</p>
                    <ol id="analysis-move-list" class="move-list" aria-label="Lista de jugadas analizadas"></ol>
                    <div class="coach-box">
                        <h4>Mejores lineas del motor</h4>
                        <ul id="analysis-top-lines" class="line-list"></ul>
                    </div>
                </article>
            </div>
        </section>

        <section id="study-section" class="panel">
            <header class="study-header">
                <h2>Estudio rapido</h2>
                <p>Bloques cortos con ideas practicas y posiciones de referencia.</p>
            </header>

            <div class="study-grid">
                <article class="card study-card">
                    <h3>Principios de apertura</h3>
                    <p>Controla el centro, desarrolla piezas menores y enroca pronto. Evita mover la misma pieza dos veces sin necesidad.</p>
                    <div class="study-diagram" data-fen="r1bqkbnr/pppp1ppp/2n5/4p3/2B1P3/5N2/PPPP1PPP/RNBQK2R w KQkq - 2 4"></div>
                    <ul class="compact-list">
                        <li>No saques la dama demasiado pronto.</li>
                        <li>Conecta las torres antes del medio juego.</li>
                        <li>Prefiere e4/d4 o c4/Nf3 según tu estilo.</li>
                    </ul>
                </article>

                <article class="card study-card">
                    <h3>Gambito de Dama</h3>
                    <p>1.d4 d5 2.c4 — blancas ofrecen un peón para ganar control del centro. Negras pueden aceptar o rechazar.</p>
                    <div class="study-diagram" data-fen="rnbqkbnr/ppp1pppp/8/3p4/2PP4/8/PP2PPPP/RNBQKBNR b KQkq c3 0 2"></div>
                    <ul class="compact-list">
                        <li>Si aceptas, no intentes mantener el peón extra.</li>
                        <li>El Gambito de Dama Rehusado con ...e6 es sólido.</li>
                        <li>Busca ...c5 para contragolpear en el centro.</li>
                    </ul>
                </article>

                <article class="card study-card">
                    <h3>Defensa Siciliana</h3>
                    <p>1.e4 c5 — la defensa más popular contra e4. Crea asimetría desde el primer momento.</p>
                    <div class="study-diagram" data-fen="rnbqkbnr/pp1ppppp/8/2p5/4P3/5N2/PPPP1PPP/RNBQKB1R b KQkq - 1 2"></div>
                    <ul class="compact-list">
                        <li>La Najdorf (5...a6) es la variante más agresiva.</li>
                        <li>Prepárate para un ataque en el flanco de rey.</li>
                        <li>El peón extra en el centro compensa la estructura.</li>
                    </ul>
                </article>

                <article class="card study-card">
                    <h3>Tácticas: clavadas y horquillas</h3>
                    <p>Una clavada inmoviliza una pieza que protege a otra más valiosa. La horquilla ataca dos piezas a la vez.</p>
                    <div class="study-diagram" data-fen="r1bqk2r/pppp1ppp/2n2n2/2b1p3/2B1P3/5N2/PPPP1PPP/RNBQK2R w KQkq - 4 4"></div>
                    <ul class="compact-list">
                        <li>Busca clavadas de alfil contra el rey o la dama.</li>
                        <li>Los caballos son las piezas que más horquillas crean.</li>
                        <li>Antes de jugar, verifica si tienes piezas clavadas.</li>
                    </ul>
                </article>

                <article class="card study-card">
                    <h3>Partida de la Ópera (Morphy, 1858)</h3>
                    <p>Ejemplo clásico de desarrollo rápido, iniciativa y mate con piezas coordinadas.</p>
                    <div class="study-diagram" data-fen="1n1Rkb1r/p4ppp/4q3/4p1B1/4P3/8/PPP2PPP/2K5 b k - 1 17"></div>
                    <ul class="compact-list">
                        <li>El rival pierde por falta de desarrollo.</li>
                        <li>La actividad vale más que el material en posiciones abiertas.</li>
                        <li>Busca jugadas forzantes: jaques, capturas, amenazas.</li>
                    </ul>
                </article>

                <article class="card study-card">
                    <h3>Mate de Legal</h3>
                    <p>Patrón de sacrificio de dama en la apertura cuando el rival tiene el rey expuesto en el centro.</p>
                    <div class="study-diagram" data-fen="r2q1bnr/ppp1kBpp/2np4/3NN3/4P3/7P/PPPP1PP1/R1BbK2R b KQ - 2 8"></div>
                    <ul class="compact-list">
                        <li>Confirma que la dama rival está sobrecargada.</li>
                        <li>Calcula hasta el mate antes de sacrificar.</li>
                        <li>Patrón útil para partidas rápidas y blitz.</li>
                    </ul>
                </article>

                <article class="card study-card">
                    <h3>Estrategia de medio juego</h3>
                    <p>Mejora tus piezas peores, controla casillas débiles y busca debilidades en la estructura de peones rival.</p>
                    <div class="study-diagram" data-fen="r1bq1rk1/pp2ppbp/2np1np1/8/3NP3/2N1BP2/PPPQ2PP/R3KB1R w KQ - 0 8"></div>
                    <ul class="compact-list">
                        <li>Identifica tu pieza peor y mejórala primero.</li>
                        <li>Las columnas abiertas son para las torres.</li>
                        <li>No cambies alfiles buenos por caballos malos.</li>
                    </ul>
                </article>

                <article class="card study-card">
                    <h3>Finales: plan universal</h3>
                    <p>Activa el rey, crea peón pasado y coloca torres detrás del peón pasado — regla de Tarrasch.</p>
                    <div class="study-diagram" data-fen="8/6kp/5pp1/8/3K4/5P2/5P1P/6R1 w - - 0 1"></div>
                    <ul class="compact-list">
                        <li>El rey activo decide finales igualados.</li>
                        <li>Evita cambios que activen al rival.</li>
                        <li>Simplifica cuando tengas ventaja técnica clara.</li>
                    </ul>
                </article>
            </div>

            <div class="resource-links">
                <a href="https://www.fide.com/FIDE/handbook/LawsOfChess.pdf" target="_blank" rel="noopener noreferrer">Leyes oficiales FIDE</a>
                <a href="https://lichess.org/study" target="_blank" rel="noopener noreferrer">Estudios interactivos (Lichess)</a>
                <a href="https://www.chessprogramming.org/Main_Page" target="_blank" rel="noopener noreferrer">Referencia tecnica de motores</a>
            </div>
            <p class="study-note">Referencia actual: Stockfish 18 (31 enero 2026) y Leyes FIDE vigentes desde 2023.</p>
        </section>
    </main>

    <div id="promotion-modal" class="promotion-modal">
        <div class="promo-overlay"></div>
        <div class="promo-content">
            <button class="promo-piece" data-piece="q"><img src="/static/media/white_queen.svg" alt="Dama" /></button>
            <button class="promo-piece" data-piece="r"><img src="/static/media/white_rook.svg" alt="Torre" /></button>
            <button class="promo-piece" data-piece="b"><img src="/static/media/white_bishop.svg" alt="Alfil" /></button>
            <button class="promo-piece" data-piece="n"><img src="/static/media/white_knight.svg" alt="Caballo" /></button>
        </div>
    </div>

    <audio id="fx-move" src="/static/media/move.mp3"></audio>
    <audio id="fx-capture" src="/static/media/capture.mp3"></audio>
    <audio id="fx-check" src="/static/media/check.mp3"></audio>
    <audio id="fx-castle" src="/static/media/castle.mp3"></audio>
    <audio id="fx-promote" src="/static/media/promote.mp3"></audio>
    <audio id="fx-end" src="/static/media/game_end.mp3"></audio>

    <script src="/static/scripts/vendor/chess.global.js?v=20260223"></script>
    <script src="/static/pages/report/scripts/main.js?v=20260223"></script>
</body>
</html>
